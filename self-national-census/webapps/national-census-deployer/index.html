<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>National Census Deployer</title>
</head>

<body>
  <main class="shell">
    <header class="hero">
      <p class="eyebrow">National Census Deployer</p>
      <h1>Deploy a new NationalCensus contract</h1>
      <p class="subhead">
        Configure nationality and minimum age, then deploy directly from MetaMask to Celo Mainnet. The deployment uses
        the official Self hub and Poseidon addresses.
      </p>
    </header>

    <section class="grid">
      <div class="panel">
        <h2>Census parameters</h2>
        <div class="field">
          <label for="nationality">Nationality (ISO‑3166‑1 alpha‑3)</label>
          <input id="nationality" type="text" maxlength="3" placeholder="ESP" />
          <p class="helper" id="nationalityHelp">Use two or three-letter uppercase code.</p>
          <a class="helper link" href="https://docs.self.xyz/use-self/self-map-countries-list" target="_blank"
            rel="noreferrer">
            View the supported nationality codes
          </a>
        </div>
        <div class="field">
          <label for="minAge">Minimum age</label>
          <input id="minAge" type="number" min="1" max="99" placeholder="18" />
        </div>
        <div class="field">
          <label for="scopeSeed">Scope seed</label>
          <input id="scopeSeed" type="text" maxlength="31" placeholder="national-census" />
          <p class="helper" id="scopeHelp">0 / 31 characters</p>
        </div>
      </div>

      <div class="panel">
        <h2>Celo Mainnet</h2>
        <div class="field">
          <label>IdentityVerificationHub V2</label>
          <input id="hubAddress" type="text" readonly />
        </div>
        <div class="field">
          <label>PoseidonT3</label>
          <input id="poseidon" type="text" readonly />
        </div>
        <div class="field">
          <label>Network</label>
          <input id="networkName" type="text" readonly value="Celo Mainnet (42220)" />
        </div>
        <p class="helper">Only Celo Mainnet is supported for deployment.</p>
      </div>
    </section>

    <section class="panel outputs">
      <h2>Deploy</h2>
      <div class="summary">
        <div>
          <span>Nationality</span>
          <strong id="summaryNationality">—</strong>
        </div>
        <div>
          <span>Minimum age</span>
          <strong id="summaryMinAge">—</strong>
        </div>
        <div>
          <span>Scope seed</span>
          <strong id="summaryScope">—</strong>
        </div>
      </div>

      <div class="field">
        <label for="computedConfigId">Computed config id</label>
        <input id="computedConfigId" type="text" readonly />
        <div class="actions">
          <button type="button" id="copyConfigId" class="ghost" disabled>Copy config id</button>
        </div>
      </div>

      <div class="actions">
        <button type="button" id="connectWallet">Connect MetaMask</button>
        <button type="button" id="registerConfig" class="ghost" disabled>Register config</button>
        <button type="button" id="deploy" disabled>Deploy NationalCensus</button>
        <span id="status" class="status">Connect wallet to begin.</span>
      </div>

      <div class="status-grid">
        <div>
          <span>Wallet</span>
          <strong id="walletAddress">—</strong>
        </div>
        <div>
          <span>Config status</span>
          <strong id="configStatus">—</strong>
        </div>
        <div>
          <span>Transaction</span>
          <strong id="txHash">—</strong>
        </div>
        <div>
          <span>Contract</span>
          <strong id="contractAddress">—</strong>
        </div>
      </div>

      <div class="actions">
        <button type="button" id="copyTx" class="ghost" disabled>Copy tx hash</button>
        <button type="button" id="copyAddress" class="ghost" disabled>Copy contract</button>
      </div>

      <div class="field">
        <label for="appLink">National Census App link</label>
        <input id="appLink" type="text" readonly placeholder="Link will be available after deployment" />
        <div class="actions">
          <button type="button" id="openAppLink" class="ghost" disabled>Open app</button>
          <button type="button" id="copyAppLink" class="ghost" disabled>Copy app link</button>
        </div>
        <p class="helper">
          Includes an <code>env</code> URL param with contract, scope, minimum age and nationality.
        </p>
      </div>
    </section>
  </main>

  <script type="module" src="src/main.js"></script>
</body>

</html>
